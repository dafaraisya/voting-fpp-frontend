{"remainingRequest":"/home/dafa/voting-fpp-frontend/node_modules/babel-loader/lib/index.js!/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dafa/voting-fpp-frontend/src/views/admin/participant/DetailParticipant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dafa/voting-fpp-frontend/src/views/admin/participant/DetailParticipant.vue","mtime":1609125918551},{"path":"/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFN3YWwgZnJvbSAnc3dlZXRhbGVydDInOwppbXBvcnQgVnVlUXIgZnJvbSAndnVlLXFyJzsKaW1wb3J0IGh0bWxUb0ltYWdlIGZyb20gJ2h0bWwtdG8taW1hZ2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BhcnRpY2lwYW50RGV0YWlsJywKICBjb21wb25lbnRzOiB7CiAgICBWdWVRcjogVnVlUXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZXRhaWw6IHsKICAgICAgICBzZXNzaW9uOiB7CiAgICAgICAgICBudW1iZXI6IDAKICAgICAgICB9LAogICAgICAgIGxvZ29TcmM6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWw6IGZ1bmN0aW9uIGRlbCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgdGl0bGU6ICdBcGFrYWggYW5kYSB5YWtpbiBtZW5naGFwdXMgcGVzZXJ0YSBpbmk/JywKICAgICAgICBzaG93RGVueUJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIllhIiwKICAgICAgICBkZW55QnV0dG9uVGV4dDogIlRpZGFrIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7CiAgICAgICAgICBheGlvcy5kZWxldGUoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdjEvcGFydGljaXBhbnQvIiArIF90aGlzLiRyb3V0ZS5wYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgICB0aXRsZTogJ1Blc2VydGEgYmVyaGFzaWwgZGloYXB1cycsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2VuZDogZnVuY3Rpb24gc2VuZCh0bywgbmFtZSwgbmltLCBpZCkgewogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAnTG9hZGluZycsCiAgICAgICAgdGV4dDogJ1NlZGFuZyBtZW5naXJpbWthbiBlbWFpbC4uLicsCiAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgIGNsb3NlT25DbGlja091dHNpZGU6IGZhbHNlLAogICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZQogICAgICB9KTsKICAgICAgaHRtbFRvSW1hZ2UudG9QbmcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlbWlyYS1jYXJkJykpLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICB0bzogdG8sCiAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgbmltOiBuaW0sCiAgICAgICAgICBpbWFnZTogaW1hZ2UsCiAgICAgICAgICBwYXJ0aWNpcGFudElkOiBpZAogICAgICAgIH07CiAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL3BlbWlyYS5mbWlwYXVucy5jb206MzAwMC9hcGkvdjEvbWFpbC8iLCBkYXRhKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgdGl0bGU6ICdFbWFpbCBiZXJoYXNpbCBkaWtpcmltJywKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQoY2FyZE5hbWUpIHsKICAgICAgaHRtbFRvSW1hZ2UudG9QbmcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlbWlyYS1jYXJkJykpLnRoZW4oZnVuY3Rpb24gKGRhdGFVcmwpIHsKICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBsaW5rLmRvd25sb2FkID0gY2FyZE5hbWU7CiAgICAgICAgbGluay5ocmVmID0gZGF0YVVybDsKICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIGF4aW9zLmdldCgiaHR0cDovL3BlbWlyYS5mbWlwYXVucy5jb206MzAwMC9hcGkvdjEvcGFydGljaXBhbnQvIiArIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHJldHVybiBfdGhpczIuZGV0YWlsID0gcmVzLmRhdGEuZGF0YTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["DetailParticipant.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <b-container>\n        <b-row>\n            <b-col lg=\"6\">\n                <div class=\"container bg-white mt-2 p-3 shadow-sm rounded\">\n                    <div id=\"pemira-card\" class=\"p-3 bg-white\" style=\"border: 2px inset #aaa\">\n                        <img src=\"@/assets/logo kpr.png\" style=\"height:50px; width:50px;\"/>\n                        <h2 class=\"text-bold\">Kartu Pemilihan<br/>PEMIRA 2020</h2>\n                        <vue-qr v-bind:text=\"detail._id\"></vue-qr><br/>\n                        <b>Nama</b><br/> {{ detail.name }}<br/>\n                        <b>NIM</b><br/> {{ detail.nim }}<br/>\n                        <b>Email</b><br/> {{ detail.email }}<br/>\n                        <b>Sesi</b><br/> {{ detail.session.number }}<br/>\n                    </div><br/>\n                    <b-button @click=\"send(detail.email, detail.name, detail.nim, detail._id)\" class=\"ml-2\" href=\"\" variant=\"primary\">\n                        <i class=\"fas fa-paper-plane\"></i>\n                        Kirim\n                    </b-button>\n                    <b-button @click=\"download('Kartu Pemilihan Pemira 2020_'+detail.name+'_'+detail.nim)\" class=\"ml-2\" href=\"\" variant=\"primary\">\n                        <i class=\"fas fa-file-download\"></i>\n                        Unduh\n                    </b-button>\n                    <router-link :to=\"{name:'EditParticipant', params:{id:detail._id}}\">\n                        <b-button class=\"ml-2\" href=\"\" variant=\"primary\">\n                            <i class=\"far fa-edit text-white\"></i>\n                            Ubah\n                        </b-button>\n                    </router-link>\n                    <b-button @click=\"del();\" class=\"ml-2\" href=\"\" variant=\"primary\">\n                        <i class=\"far fa-trash-alt text-white\"></i>\n                        Hapus\n                    </b-button>\n                </div>\n            </b-col>\n        </b-row>\n    </b-container>\n</template>\n<script>\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\nimport VueQr from 'vue-qr'\nimport htmlToImage from 'html-to-image'\n\nexport default {\n    name: 'ParticipantDetail',\n    components: {\n        VueQr\n    },\n    data() {\n        return {\n            detail: {\n                session: {\n                    number: 0,\n                },\n                logoSrc: \"\"\n            },\n        }\n    },\n    methods:{\n        del(){\n            Swal.fire({\n                title: 'Apakah anda yakin menghapus peserta ini?',\n                showDenyButton: true,\n                confirmButtonText: `Ya`,\n                denyButtonText: `Tidak`,\n            }).then((result) => {\n                if (result.isConfirmed) {            \n                    axios\n                        .delete(\"http://localhost:3000/api/v1/participant/\"+this.$route.params.id)\n                        .then(() => {\n                            Swal.fire({\n                                icon: 'success',\n                                title: 'Peserta berhasil dihapus',\n                                showConfirmButton: true\n                            }).then(()=>{\n                                this.$router.go(-1);\n                            })\n                        })\n                        .catch( err => console.log(err));\n                } \n            })\n        },\n        send(to, name, nim, id) {\n            Swal.fire({\n                title: 'Loading',\n                text: 'Sedang mengirimkan email...',\n                showConfirmButton: false,\n                closeOnClickOutside: false,\n                allowOutsideClick: false\n            })\n\n            htmlToImage.toPng(document.getElementById('pemira-card')) \n            .then(function (image) {\n                const data = {\n                    to: to,\n                    name: name,\n                    nim: nim,\n                    image: image,\n                    participantId: id\n                }\n                \n                axios\n                    .post(\"http://pemira.fmipauns.com:3000/api/v1/mail/\", data)\n                    .then(() => {\n                        Swal.fire({\n                            icon: 'success',\n                            title: 'Email berhasil dikirim',\n                            showConfirmButton: true\n                        }).then(()=>{\n                            \n                        })\n                    })\n                    .catch( err => console.log(err));\n            });\n        },\n        download(cardName) {\n            htmlToImage.toPng(document.getElementById('pemira-card')) \n            .then(function (dataUrl) {\n                var link = document.createElement('a');\n                link.download = cardName;\n                link.href = dataUrl;\n                link.click();\n            });\n        }\n    },\n    mounted() {\n        axios\n            .get(\"http://pemira.fmipauns.com:3000/api/v1/participant/\"+this.$route.params.id)\n            .then(res => (this.detail = res.data.data))\n            .catch(err => console.log(err));\n    }\n}\n</script>"],"sourceRoot":"src/views/admin/participant"}]}