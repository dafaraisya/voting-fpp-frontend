{"remainingRequest":"/home/dafa/voting-fpp-frontend/node_modules/babel-loader/lib/index.js!/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dafa/voting-fpp-frontend/src/views/admin/setting/EditSetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dafa/voting-fpp-frontend/src/views/admin/setting/EditSetting.vue","mtime":1609147468659},{"path":"/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgU3dhbCBmcm9tICdzd2VldGFsZXJ0Mic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRWRpdFNldHRpbmcnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhU2V0dGluZzogewogICAgICAgIGFubm91bmNlbWVudDogewogICAgICAgICAgZGF0ZTogJycsCiAgICAgICAgICB0aW1lOiAnJwogICAgICAgIH0sCiAgICAgICAgYXV0aGVudGljYXRpb246IHsKICAgICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICAgIHBhc3N3b3JkOiAnJwogICAgICAgIH0sCiAgICAgICAgZW1haWw6IHsKICAgICAgICAgIGVtYWlsOiAnJywKICAgICAgICAgIHBhc3N3b3JkOiAnJwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGVkaXREYXRhOiBmdW5jdGlvbiBlZGl0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkYXRhID0gewogICAgICAgICdhbm5vdW5jZW1lbnQnOiB0aGlzLmRhdGFTZXR0aW5nLmFubm91bmNlbWVudC5kYXRlICsgIlQiICsgdGhpcy5kYXRhU2V0dGluZy5hbm5vdW5jZW1lbnQudGltZSArICJaIiwKICAgICAgICAnYXV0aGVudGljYXRpb25Vc2VybmFtZSc6IHRoaXMuZGF0YVNldHRpbmcuYXV0aGVudGljYXRpb24udXNlcm5hbWUsCiAgICAgICAgJ2F1dGhlbnRpY2F0aW9uUGFzc3dvcmQnOiB0aGlzLmRhdGFTZXR0aW5nLmF1dGhlbnRpY2F0aW9uLnBhc3N3b3JkLAogICAgICAgICdlbWFpbEVtYWlsJzogdGhpcy5kYXRhU2V0dGluZy5lbWFpbC5lbWFpbCwKICAgICAgICAnZW1haWxQYXNzd29yZCc6IHRoaXMuZGF0YVNldHRpbmcuZW1haWwucGFzc3dvcmQKICAgICAgfTsKICAgICAgU3dhbC5maXJlKHsKICAgICAgICB0aXRsZTogJ0FwYWthaCBhbmRhIHlha2luIG1lbmd1YmFoIGRhdGEgcGVuZ2F0dXJhbj8nLAogICAgICAgIHNob3dEZW55QnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWEiLAogICAgICAgIGRlbnlCdXR0b25UZXh0OiAiVGlkYWsiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHsKICAgICAgICAgIGF4aW9zLnB1dCgiaHR0cDovL3BlbWlyYS5mcHB1bmRpcC5jb206MzAwMC9hcGkvdjEvc2V0dGluZy8iICsgX3RoaXMuZGF0YVNldHRpbmcuaWQsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgICB0aXRsZTogJ1BlbmdhdHVyYW4gYmVyaGFzaWwgZGlwZXJiYXJ1aScsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvYWRtaW4vc2V0dGluZyIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVGaWxlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVGaWxlVXBsb2FkKCkgewogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGhpcy4kcmVmcy5wcm9jZWR1cmUuZmlsZXNbMF0pOwogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAnQXBha2FoIGFuZGEgeWFraW4gbWVuZ3ViYWggZmlsZSBwcm9zZWR1cj8nLAogICAgICAgIHNob3dEZW55QnV0dG9uOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWEiLAogICAgICAgIGRlbnlCdXR0b25UZXh0OiAiVGlkYWsiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHsKICAgICAgICAgIGF4aW9zLnB1dCgiaHR0cDovL3BlbWlyYS5mcHB1bmRpcC5jb206MzAwMC9hcGkvdjEvc2V0dGluZy91cGxvYWQtcHJvY2VkdXJlIiwgZm9ybURhdGEsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgICAgfQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIHRpdGxlOiAnUHJvc2VkdXIgYmVyaGFzaWwgZGlwZXJiYXJ1aScsCiAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7fSk7CiAgICAgICAgICB9KSAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgYXhpb3MuZ2V0KCdodHRwOi8vcGVtaXJhLmZwcHVuZGlwLmNvbTozMDAwL2FwaS92MS9zZXR0aW5nL2FsbCcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgc2V0dGluZyA9IHJlcy5kYXRhLmRhdGFbMF07CiAgICAgIF90aGlzMi5kYXRhU2V0dGluZy5pZCA9IHNldHRpbmcuX2lkOwogICAgICBfdGhpczIuZGF0YVNldHRpbmcuYW5ub3VuY2VtZW50LmRhdGUgPSBzZXR0aW5nLmFubm91bmNlbWVudC5zbGljZSgwLCAxMCk7CiAgICAgIF90aGlzMi5kYXRhU2V0dGluZy5hbm5vdW5jZW1lbnQudGltZSA9IHNldHRpbmcuYW5ub3VuY2VtZW50LnNsaWNlKDExLCAxNik7CiAgICAgIF90aGlzMi5kYXRhU2V0dGluZy5lbWFpbC5lbWFpbCA9IHNldHRpbmcuZW1haWwuZW1haWw7CiAgICAgIF90aGlzMi5kYXRhU2V0dGluZy5lbWFpbC5wYXNzd29yZCA9IHNldHRpbmcuZW1haWwucGFzc3dvcmQ7CiAgICAgIF90aGlzMi5kYXRhU2V0dGluZy5hdXRoZW50aWNhdGlvbi51c2VybmFtZSA9IHNldHRpbmcuYXV0aGVudGljYXRpb24udXNlcm5hbWU7CiAgICAgIF90aGlzMi5kYXRhU2V0dGluZy5hdXRoZW50aWNhdGlvbi5wYXNzd29yZCA9IHNldHRpbmcuYXV0aGVudGljYXRpb24ucGFzc3dvcmQ7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["EditSetting.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <b-container>\n        <b-row>\n            <b-col lg=\"8\">\n                <div class=\"container bg-white p-4 text-left rounded-sm shadow\">\n                    <h3> Pengumuman </h3>\n                    <b-form-group label=\"Tanggal :\" label-for=\"announcement_date\">\n                        <b-form-input type=\"date\" id=\"announcement_date\" v-model=\"dataSetting.announcement.date\"></b-form-input>\n                    </b-form-group>\n                    <b-form-group label=\"Jam :\" label-for=\"announcement_time\">\n                        <b-form-input type=\"time\" id=\"announcement_time\" v-model=\"dataSetting.announcement.time\"></b-form-input>\n                    </b-form-group>         \n                    <br/>\n                    <h3> Kredensial </h3>\n                    <b-form-group label=\"Username :\" label-for=\"authentication_username\">\n                        <b-form-input id=\"authentication_username\" v-model=\"dataSetting.authentication.username\"></b-form-input>\n                    </b-form-group>\n                    <b-form-group label=\"Password :\" label-for=\"setting_number\">\n                        <b-form-input id=\"authentication_password\" v-model=\"dataSetting.authentication.password\"></b-form-input>\n                    </b-form-group>\n                    <br/>\n                    <h3> Email </h3>\n                    <b-form-group label=\"Email :\" label-for=\"email_username\">\n                        <b-form-input id=\"email_email\" v-model=\"dataSetting.email.email\"></b-form-input>\n                    </b-form-group>\n                    <b-form-group label=\"Password :\" label-for=\"email_password\">\n                        <b-form-input id=\"email_password\" v-model=\"dataSetting.email.password\"></b-form-input>\n                    </b-form-group>\n                    <br/>\n                    <h3> Prosedur </h3>\n                    <b-form-group label-for=\"procedure\">\n                        <input id=\"procedure\" ref=\"procedure\" type=\"file\" v-on:change=\"handleFileUpload()\"/>\n                    </b-form-group>\n                    <br/>\n                    <b-button variant=\"primary\" @click=\"editData()\">\n                        <i class=\"far fa-save text-white\"></i>\n                        Simpan\n                    </b-button>\n                </div>\n            </b-col>\n        </b-row>\n    </b-container>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\n\nexport default {\n    name: 'EditSetting',\n    data() {\n        return {\n            dataSetting: {\n                announcement: {\n                    date: '',\n                    time: ''\n                },\n                authentication: {\n                    username: '',\n                    password: '',\n                },\n                email: {\n                    email: '',\n                    password: '',\n                }\n            }\n        }\n    },\n    methods: {\n        editData() {\n            let data = {\n                'announcement': this.dataSetting.announcement.date + \"T\" + this.dataSetting.announcement.time + \"Z\",\n                'authenticationUsername': this.dataSetting.authentication.username,\n                'authenticationPassword': this.dataSetting.authentication.password,\n                'emailEmail': this.dataSetting.email.email,\n                'emailPassword': this.dataSetting.email.password,\n            };\n\n                Swal.fire({\n                        title: 'Apakah anda yakin mengubah data pengaturan?',\n                        showDenyButton: true,\n                        confirmButtonText: `Ya`,\n                        denyButtonText: `Tidak`,\n                    }).then((result) => {\n                        if (result.isConfirmed) {    \n                            axios\n                            .put(\"http://pemira.fppundip.com:3000/api/v1/setting/\"+this.dataSetting.id, data)\n                            .then(() => {\n                                Swal.fire({\n                                    icon: 'success',\n                                    title: 'Pengaturan berhasil diperbarui',\n                                    showConfirmButton: true\n                                }).then(()=>{\n                                    this.$router.push(\"/admin/setting\")\n                                })\n                            })\n                            //eslint-disable-next-line no-console\n                            .catch( err => console.log(err));\n                        } \n                })\n            },\n        handleFileUpload(){\n            let formData = new FormData();\n\n            formData.append('file', this.$refs.procedure.files[0]);\n            \n            Swal.fire({\n                    title: 'Apakah anda yakin mengubah file prosedur?',\n                    showDenyButton: true,\n                    confirmButtonText: `Ya`,\n                    denyButtonText: `Tidak`,\n                }).then((result) => {\n                    if (result.isConfirmed) {            \n                        axios\n                            .put(\"http://pemira.fppundip.com:3000/api/v1/setting/upload-procedure\", formData,\n                            {\n                                headers: {\n                                    'Content-Type': 'multipart/form-data'\n                                }\n                            })\n                            .then(() => {\n                                Swal.fire({\n                                    icon: 'success',\n                                    title: 'Prosedur berhasil diperbarui',\n                                    showConfirmButton: true\n                                }).then(()=>{\n                                    \n                                })\n                            })\n                            //eslint-disable-next-line no-console\n                            .catch( err => console.log(err));\n                    } \n            })\n        }, \n    },\n    created() {\n    axios\n        .get('http://pemira.fppundip.com:3000/api/v1/setting/all')\n        .then((res) => {\n            const setting = res.data.data[0];\n            this.dataSetting.id = setting._id;\n            this.dataSetting.announcement.date = setting.announcement.slice(0,10);\n            this.dataSetting.announcement.time = setting.announcement.slice(11,16);\n            this.dataSetting.email.email = setting.email.email;\n            this.dataSetting.email.password = setting.email.password;\n            this.dataSetting.authentication.username = setting.authentication.username;\n            this.dataSetting.authentication.password = setting.authentication.password;\n        })\n        .catch(error => console.log(error))\n    }\n}\n</script>\n"],"sourceRoot":"src/views/admin/setting"}]}