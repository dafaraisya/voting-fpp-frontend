{"remainingRequest":"/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dafa/voting-fpp-frontend/src/views/vote/Announcement.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/dafa/voting-fpp-frontend/src/views/vote/Announcement.vue","mtime":1606890956952},{"path":"/home/dafa/voting-fpp-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb3VudGRvd24gewogIG1hcmdpbi10b3A6IDglOwp9Ci5oaWdoY2hhcnRzLWZpZ3VyZSwKLmhpZ2hjaGFydHMtZGF0YS10YWJsZSB0YWJsZSB7CiAgbWluLXdpZHRoOiAzMTBweDsKICBtYXgtd2lkdGg6IDgwMHB4OwogIG1hcmdpbjogMWVtIGF1dG87Cn0KCiNjb250YWluZXIgewogIGhlaWdodDogNDAwcHg7Cn0KCi5oaWdoY2hhcnRzLWRhdGEtdGFibGUgdGFibGUgewogIGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBzYW5zLXNlcmlmOwogIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgYm9yZGVyOiAxcHggc29saWQgI2ViZWJlYjsKICBtYXJnaW46IDEwcHggYXV0bzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgd2lkdGg6IDEwMCU7CiAgbWF4LXdpZHRoOiA1MDBweDsKfQouaGlnaGNoYXJ0cy1kYXRhLXRhYmxlIGNhcHRpb24gewogIHBhZGRpbmc6IDFlbSAwOwogIGZvbnQtc2l6ZTogMS4yZW07CiAgY29sb3I6ICM1NTU7Cn0KLmhpZ2hjaGFydHMtZGF0YS10YWJsZSB0aCB7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBwYWRkaW5nOiAwLjVlbTsKfQouaGlnaGNoYXJ0cy1kYXRhLXRhYmxlIHRkLAouaGlnaGNoYXJ0cy1kYXRhLXRhYmxlIHRoLAouaGlnaGNoYXJ0cy1kYXRhLXRhYmxlIGNhcHRpb24gewogIHBhZGRpbmc6IDAuNWVtOwp9Ci5oaWdoY2hhcnRzLWRhdGEtdGFibGUgdGhlYWQgdHIsCi5oaWdoY2hhcnRzLWRhdGEtdGFibGUgdHI6bnRoLWNoaWxkKGV2ZW4pIHsKICBiYWNrZ3JvdW5kOiAjZjhmOGY4Owp9Ci5oaWdoY2hhcnRzLWRhdGEtdGFibGUgdHI6aG92ZXIgewogIGJhY2tncm91bmQ6ICNmMWY3ZmY7Cn0K"},{"version":3,"sources":["Announcement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Announcement.vue","sourceRoot":"src/views/vote","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <h1\n          style=\"margin-top: 50px;margin-bottom: 30px;\"\n          class=\"text-center text-white\"\n        >\n          Pengumuman Hasil Voting PEMIRA 2020\n        </h1>\n      </div>\n    </div>\n    <!-- bar chart -->\n    <div v-if=\"timeUp\">\n      <b-row>\n        <b-col lg=\"1\"></b-col>\n        <b-col lg=\"10\">\n          <b-card>\n            <b-row class=\"h2\">\n              <b-col>\n                <div class=\"row\" v-if=\"arrCandidate.length > 0\">\n                  <div class=\"col\">\n                    <highcharts :options=\"barOptions\" ref=\"chart\"></highcharts>\n                  </div>\n                </div>\n              </b-col>\n            </b-row>\n          </b-card>\n        </b-col>\n      </b-row>\n    </div>\n    <!-- countdown -->\n    <div v-else class=\"row mt-5\">\n      <div class=\"col countdown\">\n        <Countdown\n          :year=\"year\"\n          :month=\"month\"\n          :date=\"date\"\n          :hour=\"hour\"\n          :minute=\"minute\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Countdown from \"@/components/Countdown\";\nimport Highcharts from \"highcharts\";\n\nexport default {\n  components: {\n    Countdown,\n  },\n  data() {\n    return {\n      timeUp: \"\",\n      participants: [],\n      candidates: [],\n      announcement: [],\n      year: 0,\n      month: 0,\n      date: 0,\n      hour: 0,\n      minute: 0,\n      arrCandidate: [],\n      barOptions: {\n        chart: {\n          type: \"bar\",\n        },\n        title: {\n          text: \"Hasil Perhitungan Suara PEMIRA FMIPA UNS 2020\",\n        },\n        xAxis: {\n          categories: [\"oke\", \"oke2\", \"oke3\"],\n          title: {\n            text: null,\n          },\n        },\n        yAxis: {\n          min: 0,\n          title: {\n            text: \"46/100 suara\",\n            align: \"high\",\n          },\n          labels: {\n            overflow: \"justify\",\n          },\n        },\n        tooltip: {\n          valueSuffix: \" suara\",\n        },\n        plotOptions: {\n          bar: {\n            dataLabels: {\n              enabled: true,\n            },\n          },\n          series: {\n            animation: {\n              duration: 0,\n            },\n          },\n        },\n        legend: {\n          layout: \"vertical\",\n          align: \"right\",\n          verticalAlign: \"top\",\n          x: -40,\n          y: 80,\n          floating: true,\n          borderWidth: 1,\n          backgroundColor:\n            Highcharts.defaultOptions.legend.backgroundColor || \"#FFFFFF\",\n          shadow: true,\n        },\n        credits: {\n          enabled: false,\n        },\n        series: [\n          {\n            name: \"Perolehan\",\n            data: [107, 31, 635, 203, 2],\n            color: \"#4BB543\",\n            showInLegend: false,\n          },\n        ],\n      },\n      positiveChartColors: {\n        backgroundColor: \"#20bf0b\",\n      },\n      chartOptions: {\n        scales: {\n          yAxes: [\n            {\n              ticks: {\n                beginAtZero: false,\n              },\n              gridLines: {\n                display: true,\n              },\n            },\n          ],\n          xAxes: [\n            {\n              ticks: {\n                beginAtZero: false,\n              },\n              gridLines: {\n                display: false,\n              },\n            },\n          ],\n        },\n        responsive: true,\n        maintainAspectRatio: true,\n      },\n    };\n  },\n  methods: {\n    checkEndTime() {\n      const end = new Date(\n        this.year,\n        this.month - 1,\n        this.date,\n        this.hour,\n        this.minute\n      );\n\n      const now = new Date();\n\n      const distance = end.getTime() - now.getTime();\n      if (distance < 0) {\n        this.timeUp = true;\n      }\n      console.log(this.timeUp);\n    },\n    formatter() {\n      const format = this.announcement.split(\"-\");\n      this.year = parseInt(format[0]);\n      this.month = parseInt(format[1]);\n      const time = format[2].split(\"T\");\n      this.date = parseInt(time[0]);\n      const clock = time[1].split(\":\");\n      this.hour = parseInt(clock[0]);\n      this.minute = parseInt(clock[1]);\n    },\n    findCandidateById(id) {\n      var i = 0;\n      for (i = 0; i < this.candidates.length; i++) {\n        if (this.candidates[i]._id == id) return i;\n      }\n    },\n    count() {\n      setInterval(() => {\n        var now = new Date();\n\n        var endCount = new Date(this.announcement);\n\n        endCount = new Date(\n          endCount.getTime() + now.getTimezoneOffset() * 60 * 1000\n        );\n        now = new Date(\n          now.getTime() + (now.getTimezoneOffset() + 420) * 60 * 1000\n        );\n\n        var maxCount = (now - endCount) / 1000;\n        maxCount = Math.ceil(maxCount);\n\n        if (maxCount > 0) this.timeUp = true;\n\n        if (maxCount > this.participants.length)\n          maxCount = this.participants.length;\n\n        var total = [];\n        this.candidates.forEach((candidate) =>\n          total.push({\n            name: candidate.name,\n            total: 0,\n          })\n        );\n\n        var n = 0;\n\n        for (n = 0; n < maxCount; n++) {\n          if (this.participants[n].voting) {\n            const index = this.findCandidateById(\n              this.participants[n].voting.id_candidate\n            );\n            total[index].total++;\n          }\n        }\n\n        this.arrCandidate = total;\n\n        var name = [];\n        var vote = [];\n\n        total.forEach((count) => {\n          name.push(count.name);\n          vote.push(count.total);\n        });\n\n        this.barOptions.xAxis.categories = name;\n        this.barOptions.series[0].data = vote;\n        this.barOptions.yAxis.title.text =\n          maxCount + \"/\" + this.participants.length + \" suara\";\n      }, 1000);\n    },\n  },\n  mounted() {\n    axios\n      .get(\"http://52.152.228.107:3000/api/v1/announcement\")\n      .then((res) => {\n        this.announcement = res.data.data;\n        this.formatter();\n        this.checkEndTime();\n      })\n      .catch((err) => console.log(err));\n    axios\n      .get(\"http://52.152.228.107:3000/api/v1/participant/all\")\n      .then((res) => {\n        this.participants = res.data.data;\n        this.count();\n      })\n      .catch((err) => console.log(err));\n    axios\n      .get(\"http://52.152.228.107:3000/api/v1/candidate/all\")\n      .then((res) => {\n        this.candidates = res.data.data;\n      })\n      .catch((err) => console.log(err));\n  },\n};\n</script>\n<style>\n.countdown {\n  margin-top: 8%;\n}\n.highcharts-figure,\n.highcharts-data-table table {\n  min-width: 310px;\n  max-width: 800px;\n  margin: 1em auto;\n}\n\n#container {\n  height: 400px;\n}\n\n.highcharts-data-table table {\n  font-family: Verdana, sans-serif;\n  border-collapse: collapse;\n  border: 1px solid #ebebeb;\n  margin: 10px auto;\n  text-align: center;\n  width: 100%;\n  max-width: 500px;\n}\n.highcharts-data-table caption {\n  padding: 1em 0;\n  font-size: 1.2em;\n  color: #555;\n}\n.highcharts-data-table th {\n  font-weight: 600;\n  padding: 0.5em;\n}\n.highcharts-data-table td,\n.highcharts-data-table th,\n.highcharts-data-table caption {\n  padding: 0.5em;\n}\n.highcharts-data-table thead tr,\n.highcharts-data-table tr:nth-child(even) {\n  background: #f8f8f8;\n}\n.highcharts-data-table tr:hover {\n  background: #f1f7ff;\n}\n</style>\n"]}]}