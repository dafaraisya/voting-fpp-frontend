{"remainingRequest":"/home/dafa/voting-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dafa/voting-frontend/src/views/admin/setting/EditSetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dafa/voting-frontend/src/views/admin/setting/EditSetting.vue","mtime":1606890956952},{"path":"/home/dafa/voting-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dafa/voting-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IFN3YWwgZnJvbSAnc3dlZXRhbGVydDInCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnRWRpdFNldHRpbmcnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkYXRhU2V0dGluZzogewogICAgICAgICAgICAgICAgYW5ub3VuY2VtZW50OiB7CiAgICAgICAgICAgICAgICAgICAgZGF0ZTogJycsCiAgICAgICAgICAgICAgICAgICAgdGltZTogJycKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvbjogewogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZW1haWw6IHsKICAgICAgICAgICAgICAgICAgICBlbWFpbDogJycsCiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBlZGl0RGF0YSgpIHsKICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAnYW5ub3VuY2VtZW50JzogdGhpcy5kYXRhU2V0dGluZy5hbm5vdW5jZW1lbnQuZGF0ZSArICJUIiArIHRoaXMuZGF0YVNldHRpbmcuYW5ub3VuY2VtZW50LnRpbWUgKyAiWiIsCiAgICAgICAgICAgICAgICAnYXV0aGVudGljYXRpb25Vc2VybmFtZSc6IHRoaXMuZGF0YVNldHRpbmcuYXV0aGVudGljYXRpb24udXNlcm5hbWUsCiAgICAgICAgICAgICAgICAnYXV0aGVudGljYXRpb25QYXNzd29yZCc6IHRoaXMuZGF0YVNldHRpbmcuYXV0aGVudGljYXRpb24ucGFzc3dvcmQsCiAgICAgICAgICAgICAgICAnZW1haWxFbWFpbCc6IHRoaXMuZGF0YVNldHRpbmcuZW1haWwuZW1haWwsCiAgICAgICAgICAgICAgICAnZW1haWxQYXNzd29yZCc6IHRoaXMuZGF0YVNldHRpbmcuZW1haWwucGFzc3dvcmQsCiAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdBcGFrYWggYW5kYSB5YWtpbiBtZW5ndWJhaCBkYXRhIHBlbmdhdHVyYW4/JywKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RlbnlCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBgWWFgLAogICAgICAgICAgICAgICAgICAgICAgICBkZW55QnV0dG9uVGV4dDogYFRpZGFrYCwKICAgICAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc0NvbmZpcm1lZCkgeyAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHV0KCJodHRwOi8vcGVtaXJhLmZtaXBhdW5zLmNvbTozMDAwL2FwaS92MS9zZXR0aW5nLyIrdGhpcy5kYXRhU2V0dGluZy5pZCwgZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUGVuZ2F0dXJhbiBiZXJoYXNpbCBkaXBlcmJhcnVpJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYWRtaW4vc2V0dGluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goIGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgaGFuZGxlRmlsZVVwbG9hZCgpewogICAgICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuJHJlZnMucHJvY2VkdXJlLmZpbGVzWzBdKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdBcGFrYWggYW5kYSB5YWtpbiBtZW5ndWJhaCBmaWxlIHByb3NlZHVyPycsCiAgICAgICAgICAgICAgICAgICAgc2hvd0RlbnlCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IGBZYWAsCiAgICAgICAgICAgICAgICAgICAgZGVueUJ1dHRvblRleHQ6IGBUaWRha2AsCiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHV0KCJodHRwOi8vcGVtaXJhLmZtaXBhdW5zLmNvbTozMDAwL2FwaS92MS9zZXR0aW5nL3VwbG9hZC1wcm9jZWR1cmUiLCBmb3JtRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdQcm9zZWR1ciBiZXJoYXNpbCBkaXBlcmJhcnVpJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCBlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7CiAgICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgfSkKICAgICAgICB9LCAKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgYXhpb3MKICAgICAgICAuZ2V0KCdodHRwOi8vcGVtaXJhLmZtaXBhdW5zLmNvbTozMDAwL2FwaS92MS9zZXR0aW5nL2FsbCcpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBjb25zdCBzZXR0aW5nID0gcmVzLmRhdGEuZGF0YVswXTsKICAgICAgICAgICAgdGhpcy5kYXRhU2V0dGluZy5pZCA9IHNldHRpbmcuX2lkOwogICAgICAgICAgICB0aGlzLmRhdGFTZXR0aW5nLmFubm91bmNlbWVudC5kYXRlID0gc2V0dGluZy5hbm5vdW5jZW1lbnQuc2xpY2UoMCwxMCk7CiAgICAgICAgICAgIHRoaXMuZGF0YVNldHRpbmcuYW5ub3VuY2VtZW50LnRpbWUgPSBzZXR0aW5nLmFubm91bmNlbWVudC5zbGljZSgxMSwxNik7CiAgICAgICAgICAgIHRoaXMuZGF0YVNldHRpbmcuZW1haWwuZW1haWwgPSBzZXR0aW5nLmVtYWlsLmVtYWlsOwogICAgICAgICAgICB0aGlzLmRhdGFTZXR0aW5nLmVtYWlsLnBhc3N3b3JkID0gc2V0dGluZy5lbWFpbC5wYXNzd29yZDsKICAgICAgICAgICAgdGhpcy5kYXRhU2V0dGluZy5hdXRoZW50aWNhdGlvbi51c2VybmFtZSA9IHNldHRpbmcuYXV0aGVudGljYXRpb24udXNlcm5hbWU7CiAgICAgICAgICAgIHRoaXMuZGF0YVNldHRpbmcuYXV0aGVudGljYXRpb24ucGFzc3dvcmQgPSBzZXR0aW5nLmF1dGhlbnRpY2F0aW9uLnBhc3N3b3JkOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSkKICAgIH0KfQo="},{"version":3,"sources":["EditSetting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditSetting.vue","sourceRoot":"src/views/admin/setting","sourcesContent":["<template>\n    <b-container>\n        <b-row>\n            <b-col lg=\"8\">\n                <div class=\"container bg-white p-4 text-left rounded-sm shadow\">\n                    <h3> Pengumuman </h3>\n                    <b-form-group label=\"Tanggal :\" label-for=\"announcement_date\">\n                        <b-form-input type=\"date\" id=\"announcement_date\" v-model=\"dataSetting.announcement.date\"></b-form-input>\n                    </b-form-group>\n                    <b-form-group label=\"Jam :\" label-for=\"announcement_time\">\n                        <b-form-input type=\"time\" id=\"announcement_time\" v-model=\"dataSetting.announcement.time\"></b-form-input>\n                    </b-form-group>         \n                    <br/>\n                    <h3> Kredensial </h3>\n                    <b-form-group label=\"Username :\" label-for=\"authentication_username\">\n                        <b-form-input id=\"authentication_username\" v-model=\"dataSetting.authentication.username\"></b-form-input>\n                    </b-form-group>\n                    <b-form-group label=\"Password :\" label-for=\"setting_number\">\n                        <b-form-input id=\"authentication_password\" v-model=\"dataSetting.authentication.password\"></b-form-input>\n                    </b-form-group>\n                    <br/>\n                    <h3> Email </h3>\n                    <b-form-group label=\"Email :\" label-for=\"email_username\">\n                        <b-form-input id=\"email_email\" v-model=\"dataSetting.email.email\"></b-form-input>\n                    </b-form-group>\n                    <b-form-group label=\"Password :\" label-for=\"email_password\">\n                        <b-form-input id=\"email_password\" v-model=\"dataSetting.email.password\"></b-form-input>\n                    </b-form-group>\n                    <br/>\n                    <h3> Prosedur </h3>\n                    <b-form-group label-for=\"procedure\">\n                        <input id=\"procedure\" ref=\"procedure\" type=\"file\" v-on:change=\"handleFileUpload()\"/>\n                    </b-form-group>\n                    <br/>\n                    <b-button variant=\"primary\" @click=\"editData()\">\n                        <i class=\"far fa-save text-white\"></i>\n                        Simpan\n                    </b-button>\n                </div>\n            </b-col>\n        </b-row>\n    </b-container>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\n\nexport default {\n    name: 'EditSetting',\n    data() {\n        return {\n            dataSetting: {\n                announcement: {\n                    date: '',\n                    time: ''\n                },\n                authentication: {\n                    username: '',\n                    password: '',\n                },\n                email: {\n                    email: '',\n                    password: '',\n                }\n            }\n        }\n    },\n    methods: {\n        editData() {\n            let data = {\n                'announcement': this.dataSetting.announcement.date + \"T\" + this.dataSetting.announcement.time + \"Z\",\n                'authenticationUsername': this.dataSetting.authentication.username,\n                'authenticationPassword': this.dataSetting.authentication.password,\n                'emailEmail': this.dataSetting.email.email,\n                'emailPassword': this.dataSetting.email.password,\n            };\n\n                Swal.fire({\n                        title: 'Apakah anda yakin mengubah data pengaturan?',\n                        showDenyButton: true,\n                        confirmButtonText: `Ya`,\n                        denyButtonText: `Tidak`,\n                    }).then((result) => {\n                        if (result.isConfirmed) {    \n                            axios\n                            .put(\"http://pemira.fmipauns.com:3000/api/v1/setting/\"+this.dataSetting.id, data)\n                            .then(() => {\n                                Swal.fire({\n                                    icon: 'success',\n                                    title: 'Pengaturan berhasil diperbarui',\n                                    showConfirmButton: true\n                                }).then(()=>{\n                                    this.$router.push(\"/admin/setting\")\n                                })\n                            })\n                            //eslint-disable-next-line no-console\n                            .catch( err => console.log(err));\n                        } \n                })\n            },\n        handleFileUpload(){\n            let formData = new FormData();\n\n            formData.append('file', this.$refs.procedure.files[0]);\n            \n            Swal.fire({\n                    title: 'Apakah anda yakin mengubah file prosedur?',\n                    showDenyButton: true,\n                    confirmButtonText: `Ya`,\n                    denyButtonText: `Tidak`,\n                }).then((result) => {\n                    if (result.isConfirmed) {            \n                        axios\n                            .put(\"http://pemira.fmipauns.com:3000/api/v1/setting/upload-procedure\", formData,\n                            {\n                                headers: {\n                                    'Content-Type': 'multipart/form-data'\n                                }\n                            })\n                            .then(() => {\n                                Swal.fire({\n                                    icon: 'success',\n                                    title: 'Prosedur berhasil diperbarui',\n                                    showConfirmButton: true\n                                }).then(()=>{\n                                    \n                                })\n                            })\n                            //eslint-disable-next-line no-console\n                            .catch( err => console.log(err));\n                    } \n            })\n        }, \n    },\n    created() {\n    axios\n        .get('http://pemira.fmipauns.com:3000/api/v1/setting/all')\n        .then((res) => {\n            const setting = res.data.data[0];\n            this.dataSetting.id = setting._id;\n            this.dataSetting.announcement.date = setting.announcement.slice(0,10);\n            this.dataSetting.announcement.time = setting.announcement.slice(11,16);\n            this.dataSetting.email.email = setting.email.email;\n            this.dataSetting.email.password = setting.email.password;\n            this.dataSetting.authentication.username = setting.authentication.username;\n            this.dataSetting.authentication.password = setting.authentication.password;\n        })\n        .catch(error => console.log(error))\n    }\n}\n</script>\n"]}]}