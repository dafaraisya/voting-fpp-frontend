{"remainingRequest":"/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dafa/voting-fpp-frontend/src/views/admin/participant/DetailParticipant.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dafa/voting-fpp-frontend/src/views/admin/participant/DetailParticipant.vue","mtime":1609125927583},{"path":"/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dafa/voting-fpp-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IFN3YWwgZnJvbSAnc3dlZXRhbGVydDInCmltcG9ydCBWdWVRciBmcm9tICd2dWUtcXInCmltcG9ydCBodG1sVG9JbWFnZSBmcm9tICdodG1sLXRvLWltYWdlJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1BhcnRpY2lwYW50RGV0YWlsJywKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBWdWVRcgogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGV0YWlsOiB7CiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7CiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiAwLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxvZ29TcmM6ICIiCiAgICAgICAgICAgIH0sCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIGRlbCgpewogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgdGl0bGU6ICdBcGFrYWggYW5kYSB5YWtpbiBtZW5naGFwdXMgcGVzZXJ0YSBpbmk/JywKICAgICAgICAgICAgICAgIHNob3dEZW55QnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IGBZYWAsCiAgICAgICAgICAgICAgICBkZW55QnV0dG9uVGV4dDogYFRpZGFrYCwKICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgICAgICAgLmRlbGV0ZSgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS92MS9wYXJ0aWNpcGFudC8iK3RoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdQZXNlcnRhIGJlcmhhc2lsIGRpaGFwdXMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCggZXJyID0+IGNvbnNvbGUubG9nKGVycikpOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHNlbmQodG8sIG5hbWUsIG5pbSwgaWQpIHsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnTG9hZGluZycsCiAgICAgICAgICAgICAgICB0ZXh0OiAnU2VkYW5nIG1lbmdpcmlta2FuIGVtYWlsLi4uJywKICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNsb3NlT25DbGlja091dHNpZGU6IGZhbHNlLAogICAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICBodG1sVG9JbWFnZS50b1BuZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVtaXJhLWNhcmQnKSkgCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICB0bzogdG8sCiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgICBuaW06IG5pbSwKICAgICAgICAgICAgICAgICAgICBpbWFnZTogaW1hZ2UsCiAgICAgICAgICAgICAgICAgICAgcGFydGljaXBhbnRJZDogaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgICAucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS92MS9tYWlsLyIsIGRhdGEpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFbWFpbCBiZXJoYXNpbCBkaWtpcmltJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCBlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZG93bmxvYWQoY2FyZE5hbWUpIHsKICAgICAgICAgICAgaHRtbFRvSW1hZ2UudG9QbmcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlbWlyYS1jYXJkJykpIAogICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YVVybCkgewogICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gY2FyZE5hbWU7CiAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBkYXRhVXJsOwogICAgICAgICAgICAgICAgbGluay5jbGljaygpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICBheGlvcwogICAgICAgICAgICAuZ2V0KCJodHRwOi8vcGVtaXJhLmZtaXBhdW5zLmNvbTozMDAwL2FwaS92MS9wYXJ0aWNpcGFudC8iK3RoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAgICAgLnRoZW4ocmVzID0+ICh0aGlzLmRldGFpbCA9IHJlcy5kYXRhLmRhdGEpKQogICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpOwogICAgfQp9Cg=="},{"version":3,"sources":["DetailParticipant.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailParticipant.vue","sourceRoot":"src/views/admin/participant","sourcesContent":["<template>\n    <b-container>\n        <b-row>\n            <b-col lg=\"6\">\n                <div class=\"container bg-white mt-2 p-3 shadow-sm rounded\">\n                    <div id=\"pemira-card\" class=\"p-3 bg-white\" style=\"border: 2px inset #aaa\">\n                        <img src=\"@/assets/logo kpr.png\" style=\"height:50px; width:50px;\"/>\n                        <h2 class=\"text-bold\">Kartu Pemilihan<br/>PEMIRA 2020</h2>\n                        <vue-qr v-bind:text=\"detail._id\"></vue-qr><br/>\n                        <b>Nama</b><br/> {{ detail.name }}<br/>\n                        <b>NIM</b><br/> {{ detail.nim }}<br/>\n                        <b>Email</b><br/> {{ detail.email }}<br/>\n                        <b>Sesi</b><br/> {{ detail.session.number }}<br/>\n                    </div><br/>\n                    <b-button @click=\"send(detail.email, detail.name, detail.nim, detail._id)\" class=\"ml-2\" href=\"\" variant=\"primary\">\n                        <i class=\"fas fa-paper-plane\"></i>\n                        Kirim\n                    </b-button>\n                    <b-button @click=\"download('Kartu Pemilihan Pemira 2020_'+detail.name+'_'+detail.nim)\" class=\"ml-2\" href=\"\" variant=\"primary\">\n                        <i class=\"fas fa-file-download\"></i>\n                        Unduh\n                    </b-button>\n                    <router-link :to=\"{name:'EditParticipant', params:{id:detail._id}}\">\n                        <b-button class=\"ml-2\" href=\"\" variant=\"primary\">\n                            <i class=\"far fa-edit text-white\"></i>\n                            Ubah\n                        </b-button>\n                    </router-link>\n                    <b-button @click=\"del();\" class=\"ml-2\" href=\"\" variant=\"primary\">\n                        <i class=\"far fa-trash-alt text-white\"></i>\n                        Hapus\n                    </b-button>\n                </div>\n            </b-col>\n        </b-row>\n    </b-container>\n</template>\n<script>\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\nimport VueQr from 'vue-qr'\nimport htmlToImage from 'html-to-image'\n\nexport default {\n    name: 'ParticipantDetail',\n    components: {\n        VueQr\n    },\n    data() {\n        return {\n            detail: {\n                session: {\n                    number: 0,\n                },\n                logoSrc: \"\"\n            },\n        }\n    },\n    methods:{\n        del(){\n            Swal.fire({\n                title: 'Apakah anda yakin menghapus peserta ini?',\n                showDenyButton: true,\n                confirmButtonText: `Ya`,\n                denyButtonText: `Tidak`,\n            }).then((result) => {\n                if (result.isConfirmed) {            \n                    axios\n                        .delete(\"http://localhost:3000/api/v1/participant/\"+this.$route.params.id)\n                        .then(() => {\n                            Swal.fire({\n                                icon: 'success',\n                                title: 'Peserta berhasil dihapus',\n                                showConfirmButton: true\n                            }).then(()=>{\n                                this.$router.go(-1);\n                            })\n                        })\n                        .catch( err => console.log(err));\n                } \n            })\n        },\n        send(to, name, nim, id) {\n            Swal.fire({\n                title: 'Loading',\n                text: 'Sedang mengirimkan email...',\n                showConfirmButton: false,\n                closeOnClickOutside: false,\n                allowOutsideClick: false\n            })\n\n            htmlToImage.toPng(document.getElementById('pemira-card')) \n            .then(function (image) {\n                const data = {\n                    to: to,\n                    name: name,\n                    nim: nim,\n                    image: image,\n                    participantId: id\n                }\n                \n                axios\n                    .post(\"http://localhost:3000/api/v1/mail/\", data)\n                    .then(() => {\n                        Swal.fire({\n                            icon: 'success',\n                            title: 'Email berhasil dikirim',\n                            showConfirmButton: true\n                        }).then(()=>{\n                            \n                        })\n                    })\n                    .catch( err => console.log(err));\n            });\n        },\n        download(cardName) {\n            htmlToImage.toPng(document.getElementById('pemira-card')) \n            .then(function (dataUrl) {\n                var link = document.createElement('a');\n                link.download = cardName;\n                link.href = dataUrl;\n                link.click();\n            });\n        }\n    },\n    mounted() {\n        axios\n            .get(\"http://pemira.fmipauns.com:3000/api/v1/participant/\"+this.$route.params.id)\n            .then(res => (this.detail = res.data.data))\n            .catch(err => console.log(err));\n    }\n}\n</script>"]}]}